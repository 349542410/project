<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <style type="text/css">
      body {
        padding-top: 40px;
        padding-bottom: 40px;
        background-color: #f5f5f5;

      }

      .container{margin:0 auto;}
      .form-signin {
        max-width: 900px;
        margin-top:60px;
        background-color: #fff;
        border: 1px solid #e5e5e5;
        -webkit-border-radius: 5px;
           -moz-border-radius: 5px;
                border-radius: 5px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
           -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
                box-shadow: 0 1px 2px rgba(0,0,0,.05);
      }
    .form-signin table th{height:36px;font-size:16px;line-height:36px;background:#F7F7F9;}
    .form-signin table td{height:36px;line-height:36px;font-size:14px;text-indent:2em;background:#F7F7F9;}
    .form-signin table td a{text-decoration:none;color:#000;}
    .form-signin table td a:hover{color:blue;}
    .form-signin .form-control{width:400px !important;}
    </style>
    <link href="__PUBLIC__/css/one.css" rel="stylesheet">  
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.bootcss.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
    <![endif]-->
     </head>
  <body>

    <div class="container" >
      <div class="form-signin" style="padding-top:40px;background:#F7F7F9 !important;margin-bottom:40px">
					<form class="form-horizontal" action="{:U('TransitPtwo/line_area_handle')}" method='post' >					
						<div class="form-group">
							<label class="col-sm-2 control-label" for="username">地区名称:</label>
							<div class="col-sm-5">
								<input class="form-control" placeholder="地区名称" name="name" value="{$line['name']}" type="text">
							</div>
							<label class="col-sm-2 control-label"></label>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="username">地区名称别名:</label>
							<div class="col-sm-5">
								<input class="form-control" placeholder="地区名称别名" name="alias_name" value="{$line['alias_name']}" type="text">
							</div>
							<label class="col-sm-2 control-label"></label>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="username">邮编:</label>
							<div class="col-sm-5">
								<input class="form-control" placeholder="邮编" name="zipcode" value="{$line['zipcode']}" type="text">
							</div>
							<label class="col-sm-2 control-label"></label>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="username">状态:</label>
							<div class="col-sm-5">
								<if condition="$line">
									<input name="status" value="1" type="radio"  <if condition="$line['status'] eq 1">checked="checked" </if> >
									启用
									<input name="status" value="0" type="radio"  <if condition="$line['status'] eq 0"> checked="checked" </if> >
									禁用
								<else/>
									<input name="status" checked="checked" value="1" type="radio"  >
									启用
									<input name="status" value="0" type="radio"  >
									禁用
								 </if>
							</div>
							<label class="col-sm-2 control-label"></label>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="username">上级地区名:</label>
							<div class="col-sm-5">
								<select class="form-control" name="pid">
									<option style="margin:5px 3px; padding-left:5px; " <if condition="$id eq 0">selected=""</if>  value="0">请选择上级地区</option>
									<volist name="area" id="cateL">
											<option  style="margin:5px 3px; padding-left:5px;"  <if condition="$cateL['id'] eq $line['pid']">selected=""</if>    value="{$cateL['id']}">{$cateL.name}</option>
									</volist>
								</select>
							</div>
							<label class="col-sm-2 control-label"></label>
						</div>						
						
						<div class="form-group">
							<label class="col-sm-2 control-label"></label>
							<div class="col-sm-10">
								<button type="button" onclick="line_zcode_add(this)" class="btn btn-success btn-add">更新</button>
								<input type="hidden"  name="id" value="{$line['line_id']}" />
								<input type="hidden"  name="line_zipcode" value="{$line['id']}" />
								<button id="beClosed" class="btn btn-default" type="button" data-dismiss="modal">关闭</button>
								<span id="messagebox" class="msgbox" style="  right:300px;!important"></span>
							</div>
						</div>

					</form>
<script type="text/javascript">
function line_zcode_add(obj){
	var name = $(':input[name="name"]').val();
	var alias_name = $(':input[name="alias_name"]').val();
	var zipcode = $(':input[name="zipcode"]').val();
	var status = $(':input[name="status"]:checked').val();
	var pid = $(':input[name="pid"]').val();
	var id = $(':input[name="id"]').val();
	var line_zipcode =  $(':input[name="line_zipcode"]').val();
	if(name == ''){
		layer.tips('地区名称不能为空', '#test5');
		return;
	}
	
	if(zipcode == ''){
		layer.tips('邮编不能为空', '#test4');
		return;
	}
	var formData = new FormData();
	formData.append("name", name);
	formData.append("alias_name", alias_name);
	formData.append("zipcode", zipcode);
	formData.append("status", status);
	formData.append("pid", pid);
	formData.append("id", id);
	formData.append("line_zipcode", line_zipcode);
	
	var request;
	if (window.XMLHttpRequest) {
		request = new XMLHttpRequest();
	} else {
	    request = new ActiveXObject('Microsoft.XMLHTTP');
	}
	var i;
	ityzl_SHOW_LOAD_LAYER();
	request.onreadystatechange = function(){
		if(request.status == 200 && request.readyState == 4){
			if(request.responseText){
				var a = JSON.parse( request.responseText );
				var status = a.status;
				//$("#example_top").popover({placement:'top', trigger: 'focus'});
				//alert(status);
				//layer.msg('hello');
				//alert(a.data.strstr);
				//window.location.reload();
				//alert(request.responseText);
				//alert('导入成功！');
				var str = a.data.strstr;
				ityzl_CLOSE_LOAD_LAYER(i); 
                ityzl_SHOW_TIP_LAYER(str); 
                document.getElementById("form1").reset();
			}else{
				ityzl_CLOSE_LOAD_LAYER(i);
			}
		}
	}
	request.open("post", "{:U('TransitPtwo/line_area_handle')}");
	//request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	request.setRequestHeader("X-Requested-With","XMLHttpRequest");
	request.send(formData);


	
}
	
	function point(obj){
		var gouxuan=$('input[type=checkbox]').is(':checked');
		if(gouxuan){
			$('.point').removeAttr('checked');
			//$('.point').css('cursor', 'not-allowed');
			$('.point').attr('disabled', 'disabled');
		}else{
			$('.point').removeAttr('disabled');
		}

		//alert(gouxuan); 
	}
	
</script>		
<script type="text/javascript">  
 function out(i){  
     var v = i.validity;  
     if(true === v.valueMessing){  
         i.setCustomValidity("请填写此字段");  
     }else{  
         if(true === v.patternMismatch){  

             i.setCustomValidity("最多6个字母或数字，不能为中文");  
         }else{  
             i.setCustomValidity("");  
         }  
     }  
 }  
 </script>  	
      </div>
    </div> 
 
  </body>
<script src="__PUBLIC__/js/my.js"></script>
</html>
