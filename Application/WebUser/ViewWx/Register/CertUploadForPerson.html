<extend name="Public:base_register" />
<!-- 个人证件上传html -->
<html>

<!-- head -->

<body>
<block name="banner">
    <div class="banners row">
            <div class="left col-xs-4">
                <div class="ads">
                    <p class="now">{:L('Per_r_re')}</p>
                    <p class="navleft">{:L('Welcome_re')}</p>
                </div>
            </div>
            <div class="right col-xs-8">
                <img src="__IMG__/brief_01.jpg" width="100%" height="155">
            </div>
    </div>
</block>
<block name="content">
<form method="post" action="{:U('UploadForPerson')}" id="form1" enctype="multipart/form-data">

<div class="empty-container upload_cr paddl-5">

    <!-- 顶部菜单 -->

    <div class="empty-content">
        <div class="empty-area">
            
    <div id="MainContent_errorInfo" style="font-size: medium; color: red;">
    </div>
    <div class="reg-container">
        
  <ul class="c-loginprocess">
    <li id="MainContent_RegisterProcess1_step1" class="passed">
        <p class="p1">1</p>
        <span>{:L('Completed_re')}</span>
    </li>
    <li id="MainContent_RegisterProcess1_step2" class="passed">
        <p class="p1">2</p>
        <span>{:L('Email_re')}</span>
    </li>
    <li id="MainContent_RegisterProcess1_step3" class="passed">
        <p class="p1">3</p>
          <span id="MainContent_RegisterProcess1_cType">
            <if condition="$type eq 'company'">
              {:L('Complete_re_c')}
              <else />
              {:L('Complete_re_p')}
            </if>
          </span>
    </li>
    <li id="MainContent_RegisterProcess1_step4" class="passed">
         <p class="p1">4</p>
        <span>{:L('Upload_re')}</span>
    </li>
    <li id="MainContent_RegisterProcess1_step5">
       <p class="p1">5</p>
        <span>{:L('Sign_re')}</span>
    </li>
    <li class="last">
        <p class="p1">6</p>
        <span>{:L('Wait_f_re')}</span>
    </li>
      <div style="clear: both;"></div>
</ul>
        <div class="bg-white ly-pd-30 registermain" style="padding: 10% 5%;">
            <h2 class="fc-yel">{:L('Up_Upload_y')}</h2>
            {:L('Up_According')}
            <div class="fc-999 ly-pd-tb-5">{:L('Up_Document')}</div>
            <ul class="clearfix upload-lg-img">
                <li>
                    <h5 class="ly-mg-tb-10 ly-mg-tb-height40">{:L('Up_Upload_ID')}<b style="color:red;">*</b></h5>
                    <div class="filebox" style="background:url(__IMG__/upload_pic_1.jpg);width: 100%;">
                        <img id="MainContent_Image1" class="imgloaded" src="" style="height:250px;width:100%;" />

                        <!-- <a href="javascript:;" class="addsign">+</a> -->
                        <input type="file" name="photo1" id="MainContent_FileUpload1" class="file" accept="image/jpg, image/jpeg, image/png" atd="1" onclick="fileOnchange(this)" />
                    </div>
                    <div class="clear"></div>
                </li>
                <li >
                    <h5 class="ly-mg-tb-10 ly-mg-tb-height40">{:L('Up_Upload_bank')}<b style="color:red;">*</b></h5>
                    <div class="filebox" style="background:url(__IMG__/upload_pic_2.jpg);width: 100%;">
                        <img id="MainContent_Image3" class="imgloaded" src="" style="height:250px;width:100%;;" />
                       
                        <!-- <a href="javascript:;" class="addsign">+</a> -->
                        <input type="file" name="photo3" id="MainContent_FileUpload3" class="file" accept="image/jpg, image/jpeg, image/png" atd="3" onclick="fileOnchange(this)" />
                    </div>
                    <div class="clear"></div>
                </li>
                <li class="last">
                    <h5 class="ly-mg-tb-10 ly-mg-tb-height40">{:L('Up_Upload_water')}</h5>
                    <div class="filebox"  style="background:url(__IMG__/upload_pic_3.jpg);width: 100%;">
                        <img id="MainContent_Image2" class="imgloaded" src="" style="height:250px;width:100%;" />
                       
                        <!-- <a href="javascript:;" class="addsign">+</a> -->
                        <input type="file" name="photo2" id="MainContent_FileUpload2" class="file" accept="image/jpg, image/jpeg, image/png" atd="2" onclick="fileOnchange(this)" />
                    </div>
                    <div class="clear"></div>
                </li>
            </ul> 
            <div style="font-size: 2rem; color:#3a3a3a;">
                 <span id="MainContent_spanMustBe">(<span style="color:red;">*</span>){:L('Up_Please_fill')}</span>
            </div>
            <div class="ft-c ly-rel">
                <a class="c-btn-lg-next" onclick="javascript:window.history.back()">{:L('Up_Back')}</a>
                <input type="submit" name="MainContent_btnPersonStep2" value="{:L('Next_re')}" id="MainContent_btnPersonStep2" class="c-btn-lg-next" /><br />
                &nbsp;<span id="msgbox"></span>
               
            </div>
           
        </div>
    </div>

        </div>
    </div>

    <!-- footer -->

</div>
</form>

<script src="__JS__/jquery.form.js"></script>
<style>
#msgbox{font-weight:bold;}
</style>
<script>
function fileOnchange(pid){
    var atd = pid.getAttribute("atd");
    // alert(atd);
    var input = pid;

    var res = document.getElementById("MainContent_Image"+atd);

// var res = document.getElementById("MainContent_Image"+pid); 
// var input = document.getElementById("MainContent_FileUpload"+pid); 
 
if(typeof FileReader==='undefined'){
    res.innerHTML = "抱歉，你的浏览器不支持 FileReader"; 
    input.setAttribute('disabled','disabled'); 
}else{
    input.addEventListener('change',readFile,false);
}

//图片文件读取
function readFile(){ 
    var file = this.files[0];
    // console.log(file);
    if(!/image\/\w+/.test(file.type)){ 
        alert("{:L('Up_Documents')}"); 
        return false; 
    } 
    var reader = new FileReader(); 
    reader.readAsDataURL(file); 
    reader.onload = function(e){ 
        res.src = this.result;  //赋值到src
        // console.log(res);
    } 
}
}
</script>

<script language="JavaScript">
// 发送邮件成功后的页面跳转动画
jQuery(document).ready(function($){
    $('#form1').ajaxForm({
        beforeSend:function(){
            $("#msgbox").html('&nbsp;<img style="width:20px;height:20px;" src="__PUBLIC__/images/msg_loading_d.gif"/>');
            var p1 = $('#MainContent_FileUpload1').val();
            var p3 = $('#MainContent_FileUpload3').val();
            if(p1 == ''){
                $('#msgbox').html('<span style="font-size:15px;color:red;">{:L("Up_Please_1")}</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
                    $("#msgbox").html('');
                });
                return false;
            }
            if(p3 == ''){
                $('#msgbox').html('<span style="font-size:15px;color:red;">{:L("Up_Please_2")}</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
                    $("#msgbox").html('');
                });
                return false;
            }
        },
        success: complete,  //成功则执行complete函数
        dataType: 'json',
    });
});
function complete(data){
    if (data.status==1){
        $('#msgbox').html('<span style="font-size:15px;color:green;">'+data.info+'</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
            window.location.href="{:U(CONTROLLER_NAME.'/CertificationAuthorizePerson')}";
        });
    
    }else{
        $('#msgbox').html('<span style="font-size:15px;color:red;">'+data.info+'</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
            // $('#myverify').click();                //模拟用户点击刷新验证码
        });
    }
}

</script>
</block>

</body>
</html>
