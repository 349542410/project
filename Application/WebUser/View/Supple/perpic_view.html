<extend name="Public:base_register" />
<!-- 个人证件上传html -->
<html>

<!-- head -->

<body>
<block name="banner">
    <div class="banners">
            <div class="left">
                <div class="ads">
                    <p class="now">个人注册</p>
                    <p class="navleft">您正在进行个人注册流程(<span id="MainContent_labCountry">美国</span>)</p>
                </div>
            </div>
            <div class="right">
                <img src="__IMG__/brief_01.jpg" width="100%" height="155">
            </div>
    </div>
</block>
<block name="content">
<form method="post" action="{:U('per_pic')}" id="form1" enctype="multipart/form-data">

<div class="empty-container">

    <!-- 顶部菜单 -->

    <div class="empty-content">
        <div class="empty-area">
            
    <div id="MainContent_errorInfo" style="font-size: medium; color: red;">
    </div>
    <div class="reg-container">
        
  <ul class="c-loginprocess">
    <li id="MainContent_RegisterProcess1_step1" class="passed">
        <span>1.填写注册信息</span>
    </li>
    <li id="MainContent_RegisterProcess1_step2" class="passed">
        <span>2.验证注册邮箱</span>
    </li>
    <li id="MainContent_RegisterProcess1_step3" class="passed">
        <span id="MainContent_RegisterProcess1_cType">3.完善个人信息</span>
    </li>
    <li id="MainContent_RegisterProcess1_step4" class="passed">
        <span>4.上传证件</span>
    </li>
    <li id="MainContent_RegisterProcess1_step5">
        <span>5.签署授权</span>
    </li>
    <li class="last">
        <span>6.等待确认</span>
    </li>
</ul>
        <div class="bg-white ly-pd-30 registermain">
            <h2 class="fc-yel">上传您的认证信息</h2>
            根据进出口海关申报要求，请您上传以下证件的扫描件，美快仅在进出口报关使用，承诺不会向第三方提供此信息。
            <div class="fc-999 ly-pd-tb-5">单个上传文件最大为4M，支持JPG,PNG,GIF,JPEG</div>
            <ul class="clearfix upload-lg-img">
                <li>
                    <h5 class="ly-mg-tb-10 ly-mg-tb-height40">上传身份证/驾照/护照<b style="color:red;">*</b></h5>
                    <div class="filebox">
                        <img id="MainContent_Image1" class="imgloaded" src="" style="height:250px;width:250px;" />

                        <a href="javascript:void(0);" class="addsign">+</a>
                        <input type="file" name="photo1" id="MainContent_FileUpload1" class="file" atd="1" onclick="fileOnchange(this)" />
                    </div>
                </li>
                <li >
                    <h5 class="ly-mg-tb-10 ly-mg-tb-height40">上传信用卡或银行账单<b style="color:red;">*</b></h5>
                    <div class="filebox">
                        <img id="MainContent_Image3" class="imgloaded" src="" style="height:250px;width:250px;" />
                       
                        <a href="javascript:;" class="addsign">+</a>
                        <input type="file" name="photo3" id="MainContent_FileUpload3" class="file" atd="3" onclick="fileOnchange(this)" />
                    </div>
                </li>
                <li class="last">
                    <h5 class="ly-mg-tb-10 ly-mg-tb-height40">上传水/电/煤气账单</h5>
                    <div class="filebox">
                        <img id="MainContent_Image2" class="imgloaded" src="" style="height:250px;width:250px;" />
                       
                        <a href="javascript:;" class="addsign">+</a>
                        <input type="file" name="photo2" id="MainContent_FileUpload2" class="file" atd="2" onclick="fileOnchange(this)" />
                    </div>
                </li>
            </ul>
            <div class="ft-c ly-rel">
                <a class="ly-abs prevstep fc-999" onclick="javascript:window.history.back()" style="text-decoration:underline;cursor:pointer;"><上一步</a>
                <input type="submit" name="MainContent_btnPersonStep2" value="下一步" id="MainContent_btnPersonStep2" class="c-btn-lg-next" /><br />
                &nbsp;<span id="msgbox"></span>
               
            </div>
            <div><br />
                 <span id="MainContent_spanMustBe">(<span style="color:red;">*</span>)为必填项</span>
            </div>
        </div>
    </div>

        </div>
    </div>

    <!-- footer -->

</div>
</form>

<script src="__JS__/jquery.form.js"></script>
<style>
#msgbox{font-weight:bold;}
</style>
<script>
function fileOnchange(pid){
    var atd = pid.getAttribute("atd");
    // alert(atd);
    var input = pid;

    var res = document.getElementById("MainContent_Image"+atd);

// var res = document.getElementById("MainContent_Image"+pid); 
// var input = document.getElementById("MainContent_FileUpload"+pid); 
 
if(typeof FileReader==='undefined'){
    res.innerHTML = "抱歉，你的浏览器不支持 FileReader"; 
    input.setAttribute('disabled','disabled'); 
}else{
    input.addEventListener('change',readFile,false);
}

//图片文件读取
function readFile(){ 
    var file = this.files[0];
    // console.log(file);
    if(!/image\/\w+/.test(file.type)){ 
        alert("文件必须为图片！"); 
        return false; 
    } 
    var reader = new FileReader(); 
    reader.readAsDataURL(file); 
    reader.onload = function(e){ 
        res.src = this.result;  //赋值到src
        // console.log(res);
    } 
}
}
</script>

<script language="JavaScript">
// 发送邮件成功后的页面跳转动画
jQuery(document).ready(function($){
    $('#form1').ajaxForm({
        beforeSend:function(){
            $("#msgbox").html('&nbsp;<img style="width:20px;height:20px;" src="__PUBLIC__/images/msg_loading_d.gif"/>');
            var p1 = $('#MainContent_FileUpload1').val();
            var p3 = $('#MainContent_FileUpload3').val();
            if(p1 == ''){
                $('#msgbox').html('<span style="font-size:15px;color:red;">请上传身份证/驾照/护照</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
                    $("#msgbox").html('');
                });
                return false;
            }
            if(p3 == ''){
                $('#msgbox').html('<span style="font-size:15px;color:red;">请上传信用卡或银行账单</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
                    $("#msgbox").html('');
                });
                return false;
            }
        },
        success: complete,  //成功则执行complete函数
        dataType: 'json',
    });
});
function complete(data){
    if (data.status==1){
        $('#msgbox').html('<span style="font-size:15px;color:green;">'+data.info+'</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
            window.location.href=data.url;
        });
    
    }else{
        $('#msgbox').html('<span style="font-size:15px;color:red;">'+data.info+'</span>').fadeIn(300).delay(1000).fadeOut(300,function(){
            // $('#myverify').click();                //模拟用户点击刷新验证码
        });
    }
}

</script>
</block>

</body>
</html>
