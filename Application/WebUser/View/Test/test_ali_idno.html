<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="__MEMBER__/js/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="__MEMBER__/css/member/record_upload.css"/>
    <link rel="stylesheet" type="text/css" href="__MEMBER__/css/validationEngine.jquery.css">
    <script type="text/javascript" src="__MEMBER__/layer/layer.js"></script>
    <script src="__MEMBER__/js/jquery.validationEngine.js" type='text/javascript'></script>
    <script src="__MEMBER__/js/jquery.validationEngine-{:L('lng')}.js" type='text/javascript'></script>
    <script type="text/javascript" src="__MEMBER__/js/jquery.form.js"></script>
    <link href="__MEMBER__/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="__MEMBER__/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="__MEMBER__/layer/layer.js"></script>
    <script type="text/javascript">
        $(function(){$("#tempForm").validationEngine("attach",{promptPosition:"topRight",scroll:!1,addPromptClass:"formError-white",autoPositionUpdate:!0,custom_error_messages:{"#TransferLine":{required:{message:"{:L('valEng_Msg_fre')}"}},"#loc_province":{required:{message:"{:L('valEng_Msg_fre')}"}},"#loc_city":{required:{message:"{:L('valEng_Msg_fre')}"}},"#loc_town":{required:{message:"{:L('valEng_Msg_fre')}"}}}})});
    </script>
</head>
<body>

<form action="?" method="POST" enctype="multipart/form-data" id="tempForm">
    <div class="warp">
        <div class="tab">
            <div class="table_menu">
                <ul class="tabel_ul">
                    <!--<li class="selected">寄件人上传证件照</li>-->
                    <!--<li>收件人上传证件照</li>-->
                </ul>
            </div>
            <div class="tab_box">
                <div class="tab_one">
                    <span class="tab_one_span">*上传的身份证照片将同步到同一收件人的其它订单中</span>
                    <div class="obcont">
                        <img src='__MEMBER__/image/upload_img1.png' id="front_idno1" style="width: 230px;height: 120px;margin-left: 15px;">
                        <input type="file" name="file_two" id="file" accept="image/jpeg,image/jpg,image/png" atd="1" onclick="fileOnchange(this)" />
                        <p>证件国徽面</p>
                    </div>
                    <div class="obconts">
                        <img src='__MEMBER__/image/upload_img2.png' id="front_idno2" style="width: 230px;height: 120px;margin-left: 15px;">
                        <input type="file" name="file_one" id="files" accept="image/jpeg,image/jpg,image/png" atd="2" onclick="fileOnchange(this)" />
                        <p>证件头像面</p>
                    </div>
                    <div style="clear: both;"></div>
                    <div class="savebtn">
                        <input type="submit" value="提交" class="sa_sub_btn" id="sa_sub_btn">
                    </div>
                </div>
                <div class="hide tab_two">
                    <p class="tt_p">*复制以下链接发送给收件人上传证件照片</p>
                    <div class="cont">
                        <ul>
                            <li>
                                <label>电脑端上传链接：</label><input type="text" id="pcobj" class="pcobj" value="{:C('ID_URL')}I{:I('get.key')}" ><a href="javascript:;" class="copy_btn" onclick="copyurl(1)">复制链接</a>
                            </li>
                            <li>
                                <label>手机端上传链接：</label><input type="text" id="wapobj" class="wapobj" value="{:C('ID_URL_M')}I{:I('get.key')}"><a href="javascript:;" class="copy_btn" onclick="copyurl()">复制链接</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">
    $(function(){
        $("input[name='idno']").bind('input propertychange',function(){
            var myval = $(this).val();
            if(myval != ''){
                $('#sa_sub_btn').css({
                    "color" : "#ffde00",
                    "background": "#232323"
                });
//                $('#sa_sub_btn').attr('type','submit');
            }else{
                $('#sa_sub_btn').css({
                    "color" : "#fff",
                    "background": "rgba(153, 153, 153, 1)"
                });
//                $('#sa_sub_btn').attr('type','button');
            }
        });
        var $div_li=$("div .table_menu ul li");
        //设置li的单击事件
        $div_li.click(function(){
            //设置li单击时的样式
            $(this).addClass("selected")
                    .siblings().removeClass("selected");
            //记录当前点击li的index
            var index=$div_li.index(this);
            //选择与li相同index的div显示，其余隐藏
            $("div .tab_box >div")
                    .eq(index).show()
                    .siblings().hide();
        });
    });
    // 文件上传赋值到对应图片位置
    function fileOnchange(pid,def){

        var atd = pid.getAttribute("atd");
        var input = pid;

        var res = document.getElementById("front_idno"+atd);

        if(typeof FileReader==='undefined'){
            res.innerHTML = "抱歉，你的浏览器不支持 FileReader";
            input.setAttribute('disabled','disabled');
        }else{
            input.addEventListener('change',readFile,false);
        }

        // 图片文件读取
        function readFile(){
            var file = this.files[0];
            if(file){
                if(!/image\/\w+/.test(file.type)){
                    layer.open({
                        type: 0,
                        title: false,
                        skin: 'demo-class',//自定义样式demo-class
                        content: "{:L('Up_Documents')}"
                    });
                    return false;
                }
                var reader = new FileReader();

                reader.readAsDataURL(file);
                reader.onload = function(e){
                    res.src = this.result;  //赋值到src
                };
            }else{
//                var front_img = '__MEMBER__/images/pho_front.png';
//                var back_img = '__MEMBER__/images/pho_back.png';
//                var tip_img= '__MEMBER__/images/tip.png';
//                if(atd == 1){
//                    $(def).attr('src',front_img);
//                }else if(atd == 2){
//                    $(def).attr('src',back_img);
//                }else{
//                    $(def).attr('src',tip_img);
//                }

            }
        }
    }

    /**
     *
     * 复制到剪切板
     *
     */
    function copyurl(nub){
        if(nub === 1){
            $('#pcobj').select();
        }else{
            $('#wapobj').select();
        }
        document.execCommand('Copy');
        layer.msg('{:L("l_copy_success")}');
    }
</script>
</body>
</html>